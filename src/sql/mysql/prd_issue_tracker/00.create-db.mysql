SELECT 'START SQL creating the mysql db : ' ;

SET @query = CONCAT('DROP DATABASE IF EXISTS ', @mysql_db_name ) ;
PREPARE stmt FROM @query;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

SET @query = CONCAT('CREATE DATABASE /*!32312 IF NOT EXISTS*/ `', @mysql_db_name , '` /*!40100 DEFAULT CHARACTER SET utf8 */') ; 
-- DEBUG SELECT 'RUNNING THE FOLLOWING query : ' , @query ; 

PREPARE stmt FROM @query;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

SELECT 'THE FOLLOWING DB HAS BEEN CREATED' ; 
SET @query = CONCAT('SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA WHERE SCHEMA_NAME = ''' , @mysql_db_name  , '''' );
PREPARE stmt FROM @query;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

SELECT 'STOP  SQL creating the mysql db : ' ;

/*
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'
IDENTIFIED BY 'secret'  
WITH GRANT OPTION;
FLUSH PRIVILEGES;

-- allow the user to connect remotely 
CREATE USER 'root'@'%' IDENTIFIED BY 'secret' ; 
GRANT ALL PRIVILEGEroot*.* TO 'root'@'%' WITH GRANT OPTION;
*/
